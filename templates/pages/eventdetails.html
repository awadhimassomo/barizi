{% extends 'pages/base.html' %}

{% block title %}{{ event.title }} - Barizi{% endblock %}
{% block header_image %}{{ event.image.url }}{% endblock %}
{% block header_title %}{{ event.title }}{% endblock %}
{% block header_subtitle %}{{ event.location }} | {{ event.date }}{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <!-- Event Image -->
    <img src="{{ event.image.url }}" alt="{{ event.title }}" class="w-full h-80 object-cover rounded-3xl">

    <!-- Event Title & Details -->
    <h2 class="text-4xl font-bold mt-6">{{ event.title }}</h2>
    <p class="text-gray-600 mt-2">{{ event.description }}</p>
    <p class="text-gray-500 mt-1">ğŸ“… {{ event.date }} | ğŸ•’ {{ event.time }} | â³ {{ event.duration }} mins</p>
    <p class="text-gray-500 mt-1">ğŸ·ï¸ Category: {{ event.category }}</p>

    <!-- Location or Online Link -->
    {% if event.is_online %}
        <div class="mt-4">
            <a href="{{ event.online_link }}" target="_blank" class="text-blue-600 underline">ğŸŒ Join Online Event</a>
        </div>
    {% else %}
        <div class="mt-8">
            <h3 class="text-2xl font-bold mb-2">Location</h3>
            <iframe
                width="100%"
                height="300"
                class="rounded-lg"
                frameborder="0"
                style="border:0"
                src="https://www.google.com/maps?q={{ event.latitude }},{{ event.longitude }}&hl=es;z=14&output=embed"
                allowfullscreen>
            </iframe>
        </div>
    {% endif %}

    <!-- Book Now Button -->
    <div class="mt-6 text-center">
        <a href="{% url 'book_event' event.slug %}">
            <button class="bg-red-500 text-white py-3 px-8 rounded-lg hover:bg-red-600 transition">
                Buy Ticket / Book Now
            </button>
        </a>
    </div>

    <!-- Share & Add to Calendar -->
    <div class="mt-6 flex justify-between items-center">
        <!-- Share Icons -->
        <div class="flex space-x-4">
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" title="Share on Facebook">
                <img src="/static/icons/facebook.svg" class="w-6 h-6">
            </a>
            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank" title="Share on Twitter">
                <img src="/static/icons/twitter.svg" class="w-6 h-6">
            </a>
            <a href="https://api.whatsapp.com/send?text={{ request.build_absolute_uri }}" target="_blank" title="Share on WhatsApp">
                <img src="/static/icons/whatsapp.svg" class="w-6 h-6">
            </a>
        </div>

        <!-- Add to Calendar -->
        <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text={{ event.title }}&details={{ event.description }}&location={{ event.location }}&dates={{ event.date|date:'Ymd' }}T{{ event.time|time:'His' }}/{{ event.date|date:'Ymd' }}T{{ event.time|time:'His' }}" target="_blank">
            <button class="bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition">Add to Calendar</button>
        </a>
    </div>
</div>
{% endblock %}
